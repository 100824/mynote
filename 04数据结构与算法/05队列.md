学习内容 : 队列：队列在线程池等有限资源池中的应用

队列和栈的特点正好相反：先进先出。应用它，让达到上限的资源池，实现更多请求排队。

1.如何理解“队列”
2.用数组实现的顺序队列和用链表实现的链式队列
3.使用循环队列避免数据搬移操作
4.特殊队列：阻塞队列和并发队列


#### 什么是队列
* 先进先出，只支持两种基本操作，入队enqueue()和出队dequeue()
* 是一种受限制的线性表数据结构
* 应用于循环队列，阻塞队列，并发队列等。
* 用数组实现的队列叫作顺序队列，用链表实现的队列叫作链式队列
* 需要两个指针，一个head指向队头，一个tail指向队尾

#### 队列的实现
* 数组在队列满了的时候需要进行数据的迁移
* 链表实现相对比较灵活
    * 入队时，tail.next = new_node,tail = tail.next
    * 出队时，head = head.next

#### 循环队列
* 循环队列可以解决数据搬移的问题
* 代码比较复杂，需要注意确定好队空和队满的问题
![](https://static001.geekbang.org/resource/image/58/90/58ba37bb4102b87d66dffe7148b0f990.jpg)
* 当队满时，(tali + 1) % n = head
* tail指向的位置实际上是没有存储数据的，所以循环队列会浪费一个数组的存储空间
#### 阻塞队列
* 生产者与消费者的模型，在队列为空时，从队头取数据会被阻塞，直到队列中有数据了才会返回。当队满时，插入数据的操作会被阻塞，直到队列中有空闲位置是，再插入数据。
* 可以通过协调消费者与生产者的个数，来提高数据处理的效率。
#### 并发队列
* 多线程的情况下，会有多个线程同时操作队列，这时候就会存在线程的安全问题。线程安全的队列就叫作并发队列。
* 最简单的方式是直接在enqueue() dequeue()上面加锁，但是并发度会比较低。
* 基于数组的循环队列，利用CAS原子操作，可以实现非常高效的并发队列。这也是循环队列比并发队列应用更加广泛的原因。


